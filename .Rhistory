a <- merge(daily_data_1, rcsv, by="Date", all = FLASE)
a <- merge(daily_data_1, rcsv, by="Date", all = FALSE)
View(a)
library(plyr)
a <- rbind.fill(rcsv, daily_data_1)
data.frame(rcsv)
install.packages("magrittr")
a <- rbind.fill(data.frame(rcsv), data.frame(daily_data_1))
View(a)
library(magrittr)
a <- rbind.fill(rcsv%>%data.frame, daily_data_1%>%data.frame)
colnames(rcsv)%<>%gsub('X1', replacement = '')
colnames(rcsv)%<>%gsub('X1', replacement = '',.)
View(a)
colnames(a) %<>% gsub('X1', replacement = '',.)
View(a)
############### read files ############################
rcsv <- read.csv(file_name)
############### read files ############################
rcsv <- read.csv(file_name)
# colnames(rcsv) <- c("Date", "Open", "High", "Low", "Close", "Volume", "Value")
colnames(rcsv) <- gsub('X1', replacement = '',colnames(rcsv))
a <- rbind.fill(rcsv%>%data.frame, daily_data_1%>%data.frame)
colnames(a) %<>% gsub('X', replacement = '',.)
View(a)
############### read files ############################
rcsv <- read.csv(file_name)
# colnames(rcsv) <- c("Date", "Open", "High", "Low", "Close", "Volume", "Value")
colnames(rcsv) <- gsub('X', replacement = '',colnames(rcsv))
# rcsv <- xts(rcsv[, -1], order.by = as.Date(rcsv[, 1]))
# a <- merge(daily_data_1, rcsv, by="Date", all = TRUE)
a <- rbind.fill(data.frame(rcsv), data.frame(daily_data_1))
a <- rbind.fill(rcsv%>%data.frame, daily_data_1%>%data.frame)
colnames(a) %<>% gsub('X', replacement = '',.)
View(a)
View(daily_data_1)
############### read files ############################
rcsv <- read.csv(file_name)
View(rcsv)
# colnames(rcsv) <- c("Date", "Open", "High", "Low", "Close", "Volume", "Value")
colnames(rcsv) <- gsub('X', replacement = '',colnames(rcsv))
a <- rbind.fill(rcsv%>%data.frame, daily_data_1%>%data.frame)
View(a)
# rcsv <- xts(rcsv[, -1], order.by = as.Date(rcsv[, 1]))
# a <- merge(daily_data_1, rcsv, by="Date", all = TRUE)
a <- rbind.fill(data.frame(rcsv), data.frame(daily_data_1))
View(a)
View(daily_data_1)
View(rcsv)
a <- rbind.fill(rcsv%>%data.frame, daily_data_1%>%data.frame)
View(a)
View(daily_data_1)
data.frame(rcsv)
data.frame(daily_data_1)
rbind.fill(data.frame(rcsv), data.frame(daily_data_1))
# rcsv <- xts(rcsv[, -1], order.by = as.Date(rcsv[, 1]))
a <- merge(daily_data_1, rcsv, by="Date", all = TRUE)
View(a)
# rcsv <- xts(rcsv[, -1], order.by = as.Date(rcsv[, 1]))
a <- merge(daily_data_1 >%> t, rcsv, by="Date", all = TRUE)
# rcsv <- xts(rcsv[, -1], order.by = as.Date(rcsv[, 1]))
a <- merge(daily_data_1%>%t, rcsv%>%t, by="Date", all = TRUE)
daily_data_1%>%t
# rcsv <- xts(rcsv[, -1], order.by = as.Date(rcsv[, 1]))
a <- merge(daily_data_1%>%t, rcsv%>%t, by=row, all = TRUE)
# rcsv <- xts(rcsv[, -1], order.by = as.Date(rcsv[, 1]))
a <- merge(daily_data_1%>%t, rcsv%>%t, all = TRUE)
View(a)
rcsv_55 <- cbind(colnames(rcsv), rcsv)
View(rcsv_55)
rcsv_55 <- rbind(colnames(rcsv), rcsv)
colnames(rcsv)
colnames(rcsv)[1]
rcsv_55 <- rbind(c("no",colnames(rcsv)[2]), rcsv)
c("no",colnames(rcsv)[2])
rcsv
rcsv_55 <- rbind(c("555",colnames(rcsv)[2]), rcsv)
rcsv_55 <- rbind(c(colnames(rcsv)[2],colnames(rcsv)[2]), rcsv)
rcsv_55 <- rbind(c("no",colnames(rcsv)[2]), rcsv%>%data.frame)
rcsv_55 <- rbind(c("no",colnames(rcsv)[2])%>%data.frame, rcsv%>%data.frame)
rcsv_55 <- rbind(c("no",colnames(rcsv)[2]), rcsv%>%data.frame)
rcsv%>%t
rcsv_55 <- rbind(rcsv%>%t%>%rownames, rcsv%>%t)
View(rcsv_55)
rcsv_55 <- cbind(rcsv%>%t%>%rownames, rcsv%>%t)
View(rcsv_55)
daily_data_1_55 <- cbind(daily_data_1%>%t%>%rownames, daily_data_1%>%t)
# rcsv <- xts(rcsv[, -1], order.by = as.Date(rcsv[, 1]))
a <- merge(rcsv_55, daily_data_1_55%>%t, by="Date", all = TRUE)
View(rcsv_55)
# rcsv <- xts(rcsv[, -1], order.by = as.Date(rcsv[, 1]))
a <- merge(rcsv_55, daily_data_1_55%>%t, by="V1", all = TRUE)
View(daily_data_1)
View(daily_data_3)
View(daily_data_1_55)
# rcsv <- xts(rcsv[, -1], order.by = as.Date(rcsv[, 1]))
a <- merge(rcsv_55, daily_data_1_55%>%t, by="V1", all = TRUE)
# rcsv <- xts(rcsv[, -1], order.by = as.Date(rcsv[, 1]))
a <- merge(rcsv_55, daily_data_1_55%>%t, by=rcsv_55$V1, all = TRUE)
rcsv_55$V1
rcsv_55[1,]
rcsv_55[,1]
# rcsv <- xts(rcsv[, -1], order.by = as.Date(rcsv[, 1]))
a <- merge(rcsv_55, daily_data_1_55%>%t, by=rcsv_55[,1], all = TRUE)
# rcsv <- xts(rcsv[, -1], order.by = as.Date(rcsv[, 1]))
a <- merge(rcsv_55%>%data.frame, daily_data_1_55%>%t%>%data.frame, by="V1", all = TRUE)
rcsv_55%>%data.frame
# rcsv <- xts(rcsv[, -1], order.by = as.Date(rcsv[, 1]))
a <- merge(rcsv_55%>%data.frame, daily_data_1_55%>%t%>%data.frame, by="X1", all = TRUE)
rcsv_55%>%colnames
rcsv_55
# rcsv <- xts(rcsv[, -1], order.by = as.Date(rcsv[, 1]))
a <- merge(rcsv_55%>%colnames, daily_data_1_55%>%t, by=[,1], all = TRUE)
############### read files ############################
rcsv <- read.csv(file_name)
# colnames(rcsv) <- c("Date", "Open", "High", "Low", "Close", "Volume", "Value")
colnames(rcsv) <- gsub('X', replacement = '',colnames(rcsv))
# rcsv <- xts(rcsv[, -1], order.by = as.Date(rcsv[, 1]))
a <- rbind.fill(data.frame(rcsv), data.frame(daily_data_1))
View(a)
# colnames(rcsv) <- c("Date", "Open", "High", "Low", "Close", "Volume", "Value")
colnames(rcsv) <- gsub('X1', replacement = '',colnames(rcsv))
# rcsv <- xts(rcsv[, -1], order.by = as.Date(rcsv[, 1]))
a <- rbind.fill(data.frame(rcsv), data.frame(daily_data_1))
View(a)
View(rcsv)
############### read files ############################
rcsv <- read.csv(file_name)
# colnames(rcsv) <- c("Date", "Open", "High", "Low", "Close", "Volume", "Value")
colnames(rcsv) <- gsub('X1', replacement = '',colnames(rcsv))
a <- rbind.fill(rcsv%>%data.frame, daily_data_1%>%data.frame)
View(a)
a <- merge(rcsv%>%data.frame, daily_data_1%>%data.frame)
a <- merge(rcsv%>%data.frame, daily_data_1%>%data.frame, all=TRUE)
View(a)
############### read files ############################
rcsv <- read.csv(file_name)
# colnames(rcsv) <- c("Date", "Open", "High", "Low", "Close", "Volume", "Value")
colnames(rcsv) <- gsub('X', replacement = '',colnames(rcsv))
a <- merge(rcsv%>%data.frame, daily_data_1%>%data.frame, all=TRUE)
View(a)
############### read files ############################
rcsv <- read.csv(file_name)
# colnames(rcsv) <- c("Date", "Open", "High", "Low", "Close", "Volume", "Value")
colnames(rcsv) <- gsub('X1', replacement = '',colnames(rcsv))
a <- merge(rcsv%>%data.frame, daily_data_1%>%data.frame, all=TRUE)
View(a)
rcsv <- read.csv(file_name)
# colnames(rcsv) <- c("Date", "Open", "High", "Low", "Close", "Volume", "Value")
colnames(rcsv) <- gsub('X1', replacement = '',colnames(rcsv))
# rcsv <- xts(rcsv[, -1], order.by = as.Date(rcsv[, 1]))
a <- merge(rcsv%>%data.frame, daily_data_1%>%data.frame, all=TRUE)
a[is.na(a)] <- 0
colnames(a) %<>% gsub('X', replacement = '',.)
View(a)
a%<>%t
a[is.na(a)] <- 0
View(a)
a%<>%t
View(a)
colnames(a) %<>% gsub('X', replacement = '',.)
View(a)
library(quantmod)
library(lubridate)
library(jsonlite)
library(rvest)
library(magrittr)
#------------------------------------daily data DOHLCV ----------------------------------------------
source("func.R"); stock_list <- get_stock_num_list("20190429")
source("func.R"); date_set <- get_date_set_all(2010)
file_path <- paste0(getwd(), "/data_DOHLCV/")
# file_name <- paste0(file_path, stock_list[4],".csv")
if(dir.exists(file_path) == FALSE){ dir.create(file_path)}
# source("DOHLCV.R"); update_DOHLCV(date_set[1:4], stock_list[1:4], file_path)
source("DOHLCV.R"); update_DOHLCV_simplify(date_set[1:12], stock_list[1:20], file_path)
file_name <- paste0(file_path,"Volumn.csv")
if(file.exists(file_name)){
############### read files ############################
rcsv <- read.csv(file_name)
# colnames(rcsv) <- c("Date", "Open", "High", "Low", "Close", "Volume", "Value")
colnames(rcsv) <- gsub('X1', replacement = '',colnames(rcsv))
# rcsv <- xts(rcsv[, -1], order.by = as.Date(rcsv[, 1]))
a <- merge(rcsv%>%data.frame, daily_data_1%>%data.frame, all=TRUE)
a%<>%t
a[is.na(a)] <- 0
a%<>%t
colnames(a) %<>% gsub('X', replacement = '',.)
############### update files ############################
source("func.R"); update_rcsv <- xts_update(rcsv_xts, stock_data_1, daily_data_1)
############### write files ############################
sink(file = file_name, append = TRUE)
write.table(update_rcsv, file = file_name, sep=",", row.names = FALSE, col.names = FALSE,append = TRUE)
sink()
} else{
############### write files ############################
sink(file = file_name, append = FALSE)
write.table(daily_data_1, file = file_name, sep=",", row.names = FALSE, append = FALSE)
sink()
}
View(daily_data_1)
View(historyStock)
library(quantmod)
library(lubridate)
library(jsonlite)
library(rvest)
library(magrittr)
#------------------------------------eps estimate month-----------------------
source("estimate.R");   monthly_all <- monthly_data_fecth(108)
for(x_name in c(stock_list[1:4])){
monthly_data <- xts(as.numeric(monthly_all[-1,grepl(x_name,monthly_all[1,])]), order.by = as.Date(as.numeric(monthly_all[-1,1])))
chartSeries(monthly_data, name = monthly_all[1,grepl(x_name,monthly_all[1,])],theme="black")
}
#
#------------------------------------daily data DOHLCV ----------------------------------------------
source("func.R"); stock_list <- get_stock_num_list("20190429")
source("func.R"); date_set <- get_date_set_all(2010)
file_path <- paste0(getwd(), "/data_DOHLCV/")
source("estimate.R");   monthly_all <- monthly_data_fecth(108)
for(x_name in c(stock_list[1:4])){
monthly_data <- xts(as.numeric(monthly_all[-1,grepl(x_name,monthly_all[1,])]), order.by = as.Date(as.numeric(monthly_all[-1,1])))
chartSeries(monthly_data, name = monthly_all[1,grepl(x_name,monthly_all[1,])],theme="black")
}
#
for(y in c(99:99)){#99~108
for(z in c(1:4)){#1~4
file_name_wr <- paste0(paste0(getwd(), "/data_SEASON/"), paste0(y,"0",z),".csv")
rcsv_tmp <- read.csv(file_name_wr)
# rcsv <- rbind(rcsv, rcsv_tmp[1:length(rcsv_tmp$V1),1:20])
# tmp_sea <- as.character(rcsv$V1[1]);tmp_sea
cat(y,z,";")
}
}
View(rcsv_tmp)
grepl("1101",rcsv_tmp[1,])
View(rcsv_tmp)
grepl("1101",rcsv_tmp[2,])
rcsv_tmp[2,]
rcsv_tmp%<>%t%>%t
View(rcsv_tmp)
grepl("1101",rcsv_tmp[2,])
grepl("¤½¥q¦WºÙ",rcsv_tmp[1,])
rcsv_tmp[-1, grepl("¤½¥q¦WºÙ",rcsv_tmp[1,])]
rcsv_tmp[-1, grepl("¤½¥q¥N¸¹",rcsv_tmp[1,])]
a <- rbind(
rcsv_tmp[-1, grepl("¤½¥q¥N¸¹",rcsv_tmp[1,])] # stock no
,rcsv_tmp[-1, grepl("Àç·~¦¬¤J",rcsv_tmp[1,])] # revenue
,rcsv_tmp[-1, grepl("°ò¥»¨CªÑ¬Õ¾l",rcsv_tmp[1,])] # eps
)
View(a)
a <- cbind(
rcsv_tmp[-1, grepl("¤½¥q¥N¸¹",rcsv_tmp[1,])] # stock no
,rcsv_tmp[-1, grepl("Àç·~¦¬¤J",rcsv_tmp[1,])] # revenue
,rcsv_tmp[-1, grepl("°ò¥»¨CªÑ¬Õ¾l",rcsv_tmp[1,])] # eps
)
View(a)
colnames(a) <- c("¤½¥q¥N¸¹","Àç·~¦¬¤J","°ò¥»¨CªÑ¬Õ¾l")
View(a)
a <- cbind(
rcsv_tmp[-1, grepl("公司代號",rcsv_tmp[1,])] # stock no
,rcsv_tmp[-1, grepl("Àç·~¦¬¤J",rcsv_tmp[1,])] # revenue
,rcsv_tmp[-1, grepl("°ò¥»¨CªÑ¬Õ¾l",rcsv_tmp[1,])] # eps
)
View(a)
a <- cbind(
rcsv_tmp[-1, grepl("¤½¥q¥N¸¹",rcsv_tmp[1,])] # stock no
,rcsv_tmp[-1, grepl("Àç·~¦¬¤J",rcsv_tmp[1,])] # revenue
,rcsv_tmp[-1, grepl("°ò¥»¨CªÑ¬Õ¾l",rcsv_tmp[1,])] # eps
)
View(a)
a <- cbind(
rcsv_tmp[-1, grepl("¤½¥q¥N¸¹",rcsv_tmp[1,])] # stock no
,rcsv_tmp[-1, grepl("Àç·~¦¬¤J",rcsv_tmp[1,])] # operating revenue
,rcsv_tmp[-1, grepl("Àç·~¦¨¥»",rcsv_tmp[1,])] # operating costs
,rcsv_tmp[-1, grepl("Àç·~¤ò§Q(¤ò·l)",rcsv_tmp[1,])] # operating gross profit
,rcsv_tmp[-1, grepl("Àç·~¶O¥Î",rcsv_tmp[1,])] # operating expenses
,rcsv_tmp[-1, grepl("Àç·~²b§Q(²b·l)",rcsv_tmp[1,])] # operating net profit
,rcsv_tmp[-1, grepl("Àç·~¥~¦¬¤J¤Î§Q¯q",rcsv_tmp[1,])] # not operating revenue
,rcsv_tmp[-1, grepl("Àç·~¥~¶O¥Î¤Î·l¥¢",rcsv_tmp[1,])] # not operating expenses
,rcsv_tmp[-1, grepl("Ä~ÄòÀç·~³æ¦ì²b§Q(²b·l)",rcsv_tmp[1,])] # all income after tax
,rcsv_tmp[-1, grepl("¥»´Á²b§Q(²b·l)",rcsv_tmp[1,])] # income
,rcsv_tmp[-1, grepl("°ò¥»¨CªÑ¬Õ¾l",rcsv_tmp[1,])] # eps
)
View(a)
for(y in c(101:101)){#99~108
for(z in c(1:1)){#1~4
file_name_wr <- paste0(paste0(getwd(), "/data_SEASON/"), paste0(y,"0",z),".csv")
rcsv_tmp <- read.csv(file_name_wr)
# rcsv <- rbind(rcsv, rcsv_tmp[1:length(rcsv_tmp$V1),1:20])
# tmp_sea <- as.character(rcsv$V1[1]);tmp_sea
cat(y,z,";")
}
}
rcsv_tmp%<>%t%>%t
a <- cbind(
rcsv_tmp[-1, grepl("¤½¥q¥N¸¹",rcsv_tmp[1,])] # stock no
,rcsv_tmp[-1, grepl("Àç·~¦¬¤J",rcsv_tmp[1,])] # operating revenue
,rcsv_tmp[-1, grepl("Àç·~¦¨¥»",rcsv_tmp[1,])] # operating costs
,rcsv_tmp[-1, grepl("Àç·~¤ò§Q(¤ò·l)",rcsv_tmp[1,])] # operating gross profit
,rcsv_tmp[-1, grepl("Àç·~¶O¥Î",rcsv_tmp[1,])] # operating expenses
,rcsv_tmp[-1, grepl("Àç·~²b§Q(²b·l)",rcsv_tmp[1,])] # operating net profit
,rcsv_tmp[-1, grepl("Àç·~¥~¦¬¤J¤Î§Q¯q",rcsv_tmp[1,])] # not operating revenue
,rcsv_tmp[-1, grepl("Àç·~¥~¶O¥Î¤Î·l¥¢",rcsv_tmp[1,])] # not operating expenses
,rcsv_tmp[-1, grepl("Ä~ÄòÀç·~³æ¦ì²b§Q(²b·l)",rcsv_tmp[1,])] # all income after tax
,rcsv_tmp[-1, grepl("¥»´Á²b§Q(²b·l)",rcsv_tmp[1,])] # income
,rcsv_tmp[-1, grepl("°ò¥»¨CªÑ¬Õ¾l",rcsv_tmp[1,])] # eps
)
View(a)
a <- cbind(
rcsv_tmp[-1, grepl("¤½¥q¥N¸¹",rcsv_tmp[1,])] # stock no
,rcsv_tmp[-1, grepl("Àç·~¦¬¤J",rcsv_tmp[1,])] # operating revenue
,rcsv_tmp[-1, grepl("Àç·~¦¨¥»",rcsv_tmp[1,])] # operating costs
,rcsv_tmp[-1, grepl("Àç·~¤ò§Q",rcsv_tmp[1,])] # operating gross profit
,rcsv_tmp[-1, grepl("Àç·~¶O¥Î",rcsv_tmp[1,])] # operating expenses
,rcsv_tmp[-1, grepl("Àç·~²b§Q(²b·l)",rcsv_tmp[1,])] # operating net profit
,rcsv_tmp[-1, grepl("Àç·~¥~¦¬¤J¤Î§Q¯q",rcsv_tmp[1,])] # not operating revenue
,rcsv_tmp[-1, grepl("Àç·~¥~¶O¥Î¤Î·l¥¢",rcsv_tmp[1,])] # not operating expenses
,rcsv_tmp[-1, grepl("Ä~ÄòÀç·~³æ¦ì²b§Q(²b·l)",rcsv_tmp[1,])] # all income after tax
,rcsv_tmp[-1, grepl("¥»´Á²b§Q(²b·l)",rcsv_tmp[1,])] # income
,rcsv_tmp[-1, grepl("°ò¥»¨CªÑ¬Õ¾l",rcsv_tmp[1,])] # eps
)
a <- cbind(
rcsv_tmp[-1, grepl("¤½¥q¥N¸¹",rcsv_tmp[1,])] # stock no
,rcsv_tmp[-1, grepl("Àç·~¦¬¤J",rcsv_tmp[1,])] # operating revenue
,rcsv_tmp[-1, grepl("Àç·~¦¨¥»",rcsv_tmp[1,])] # operating costs
,rcsv_tmp[-1, grepl("Àç·~¤ò§Q",rcsv_tmp[1,])] # operating gross profit
,rcsv_tmp[-1, grepl("Àç·~¶O¥Î",rcsv_tmp[1,])] # operating expenses
,rcsv_tmp[-1, grepl("Àç·~²b§Q",rcsv_tmp[1,])] # operating net profit
,rcsv_tmp[-1, grepl("Àç·~¥~¦¬¤J¤Î§Q¯q",rcsv_tmp[1,])] # not operating revenue
,rcsv_tmp[-1, grepl("Àç·~¥~¶O¥Î¤Î·l¥¢",rcsv_tmp[1,])] # not operating expenses
,rcsv_tmp[-1, grepl("Ä~ÄòÀç·~³æ¦ì²b§Q",rcsv_tmp[1,])] # all income after tax
,rcsv_tmp[-1, grepl("¥»´Á²b§Q",rcsv_tmp[1,])] # income
,rcsv_tmp[-1, grepl("°ò¥»¨CªÑ¬Õ¾l",rcsv_tmp[1,])] # eps
)
View(a)
a <- cbind(
rcsv_tmp[-1, grepl("¤½¥q¥N¸¹",rcsv_tmp[1,])] # stock no
,rcsv_tmp[-1, grepl("Àç·~¦¬¤J",rcsv_tmp[1,])] # operating revenue
,rcsv_tmp[-1, grepl("Àç·~¦¨¥»",rcsv_tmp[1,])] # operating costs
,rcsv_tmp[-1, grepl("Àç·~¤ò§Q",rcsv_tmp[1,])] # operating gross profit
,rcsv_tmp[-1, grepl("Àç·~¶O¥Î",rcsv_tmp[1,])] # operating expenses
,rcsv_tmp[-1, grepl("Àç·~²b§Q",rcsv_tmp[1,])] # operating net profit
,rcsv_tmp[-1, grepl("Àç·~¥~¦¬¤J¤Î§Q¯q",rcsv_tmp[1,])] # not operating revenue
,rcsv_tmp[-1, grepl("Àç·~¥~¶O¥Î¤Î·l¥¢",rcsv_tmp[1,])] # not operating expenses
,rcsv_tmp[-1, grepl("¥»´Á²b§Q",rcsv_tmp[1,])] # income after tax
,rcsv_tmp[-1, grepl("°ò¥»¨CªÑ¬Õ¾l",rcsv_tmp[1,])] # eps
)
View(a)
colnames(a) <- c("¤½¥q¥N¸¹","Àç·~¦¬¤J","Àç·~¦¨¥»","Àç·~¤ò§Q","Àç·~¶O¥Î","Àç·~²b§Q",
"Àç·~¥~¦¬¤J¤Î§Q¯q","Àç·~¥~¶O¥Î¤Î·l¥¢","¥»´Á²b§Q","°ò¥»¨CªÑ¬Õ¾l",)
View(a)
colnames(a) <- c("¤½¥q¥N¸¹","Àç·~¦¬¤J","Àç·~¦¨¥»","Àç·~¤ò§Q","Àç·~¶O¥Î","Àç·~²b§Q",
"Àç·~¥~¦¬¤J¤Î§Q¯q","Àç·~¥~¶O¥Î¤Î·l¥¢","¥»´Á²b§Q","°ò¥»¨CªÑ¬Õ¾l")
View(a)
#------------------------------------eps estimate season-----------------------
rcsv <- NULL
for(y in c(101:101)){#99~108
for(z in c(1:1)){#1~4
file_name_wr <- paste0(paste0(getwd(), "/data_SEASON/"), paste0(y,"0",z),".csv")
rcsv_tmp <- read.csv(file_name_wr)
# rcsv <- rbind(rcsv, rcsv_tmp[1:length(rcsv_tmp$V1),1:20])
# tmp_sea <- as.character(rcsv$V1[1]);tmp_sea
rcsv_tmp%<>%t%>%t
a <- cbind(
rcsv_tmp[-1, grepl("¤½¥q¥N¸¹",rcsv_tmp[1,])] # stock no
,rcsv_tmp[-1, grepl("Àç·~¦¬¤J",rcsv_tmp[1,])] # operating revenue
,rcsv_tmp[-1, grepl("Àç·~¦¨¥»",rcsv_tmp[1,])] # operating costs
,rcsv_tmp[-1, grepl("Àç·~¤ò§Q",rcsv_tmp[1,])] # operating gross profit
,rcsv_tmp[-1, grepl("Àç·~¶O¥Î",rcsv_tmp[1,])] # operating expenses
,rcsv_tmp[-1, grepl("Àç·~²b§Q",rcsv_tmp[1,])] # operating net profit
,rcsv_tmp[-1, grepl("Àç·~¥~¦¬¤J¤Î§Q¯q",rcsv_tmp[1,])] # not operating revenue
,rcsv_tmp[-1, grepl("Àç·~¥~¶O¥Î¤Î·l¥¢",rcsv_tmp[1,])] # not operating expenses
,rcsv_tmp[-1, grepl("¥»´Á²b§Q",rcsv_tmp[1,])] # income after tax
,rcsv_tmp[-1, grepl("°ò¥»¨CªÑ¬Õ¾l",rcsv_tmp[1,])] # eps
)
colnames(a) <- c("¤½¥q¥N¸¹","Àç·~¦¬¤J","Àç·~¦¨¥»","Àç·~¤ò§Q","Àç·~¶O¥Î","Àç·~²b§Q",
"Àç·~¥~¦¬¤J¤Î§Q¯q","Àç·~¥~¶O¥Î¤Î·l¥¢","¥»´Á²b§Q","°ò¥»¨CªÑ¬Õ¾l")
cat(y,z,";")
}
}
#------------------------------------eps estimate season-----------------------
rcsv <- NULL
for(y in c(99:101)){#99~108
for(z in c(1:4)){#1~4
file_name_wr <- paste0(paste0(getwd(), "/data_SEASON/"), paste0(y,"0",z),".csv")
rcsv_tmp <- read.csv(file_name_wr)
# rcsv <- rbind(rcsv, rcsv_tmp[1:length(rcsv_tmp$V1),1:20])
# tmp_sea <- as.character(rcsv$V1[1]);tmp_sea
rcsv_tmp%<>%t%>%t
a <- cbind(
rcsv_tmp[-1, grepl("¤½¥q¥N¸¹",rcsv_tmp[1,])] # stock no
,rcsv_tmp[-1, grepl("Àç·~¦¬¤J",rcsv_tmp[1,])] # operating revenue
,rcsv_tmp[-1, grepl("Àç·~¦¨¥»",rcsv_tmp[1,])] # operating costs
,rcsv_tmp[-1, grepl("Àç·~¤ò§Q",rcsv_tmp[1,])] # operating gross profit
,rcsv_tmp[-1, grepl("Àç·~¶O¥Î",rcsv_tmp[1,])] # operating expenses
,rcsv_tmp[-1, grepl("Àç·~²b§Q",rcsv_tmp[1,])] # operating net profit
,rcsv_tmp[-1, grepl("Àç·~¥~¦¬¤J¤Î§Q¯q",rcsv_tmp[1,])] # not operating revenue
,rcsv_tmp[-1, grepl("Àç·~¥~¶O¥Î¤Î·l¥¢",rcsv_tmp[1,])] # not operating expenses
,rcsv_tmp[-1, grepl("¥»´Á²b§Q",rcsv_tmp[1,])] # income after tax
,rcsv_tmp[-1, grepl("°ò¥»¨CªÑ¬Õ¾l",rcsv_tmp[1,])] # eps
)
colnames(a) <- c("¤½¥q¥N¸¹","Àç·~¦¬¤J","Àç·~¦¨¥»","Àç·~¤ò§Q","Àç·~¶O¥Î","Àç·~²b§Q",
"Àç·~¥~¦¬¤J¤Î§Q¯q","Àç·~¥~¶O¥Î¤Î·l¥¢","¥»´Á²b§Q","°ò¥»¨CªÑ¬Õ¾l")
cat(y,z,";")
}
}
for(y in c(99:108)){#99~108
for(z in c(1:4)){#1~4
file_name_wr <- paste0(paste0(getwd(), "/data_SEASON/"), paste0(y,"0",z),".csv")
rcsv_tmp <- read.csv(file_name_wr)
# rcsv <- rbind(rcsv, rcsv_tmp[1:length(rcsv_tmp$V1),1:20])
# tmp_sea <- as.character(rcsv$V1[1]);tmp_sea
rcsv_tmp%<>%t%>%t
a <- cbind(
rcsv_tmp[-1, grepl("¤½¥q¥N¸¹",rcsv_tmp[1,])] # stock no
,rcsv_tmp[-1, grepl("Àç·~¦¬¤J",rcsv_tmp[1,])] # operating revenue
,rcsv_tmp[-1, grepl("Àç·~¦¨¥»",rcsv_tmp[1,])] # operating costs
,rcsv_tmp[-1, grepl("Àç·~¤ò§Q",rcsv_tmp[1,])] # operating gross profit
,rcsv_tmp[-1, grepl("Àç·~¶O¥Î",rcsv_tmp[1,])] # operating expenses
,rcsv_tmp[-1, grepl("Àç·~²b§Q",rcsv_tmp[1,])] # operating net profit
,rcsv_tmp[-1, grepl("Àç·~¥~¦¬¤J¤Î§Q¯q",rcsv_tmp[1,])] # not operating revenue
,rcsv_tmp[-1, grepl("Àç·~¥~¶O¥Î¤Î·l¥¢",rcsv_tmp[1,])] # not operating expenses
,rcsv_tmp[-1, grepl("¥»´Á²b§Q",rcsv_tmp[1,])] # income after tax
,rcsv_tmp[-1, grepl("°ò¥»¨CªÑ¬Õ¾l",rcsv_tmp[1,])] # eps
)
colnames(a) <- c("¤½¥q¥N¸¹","Àç·~¦¬¤J","Àç·~¦¨¥»","Àç·~¤ò§Q","Àç·~¶O¥Î","Àç·~²b§Q",
"Àç·~¥~¦¬¤J¤Î§Q¯q","Àç·~¥~¶O¥Î¤Î·l¥¢","¥»´Á²b§Q","°ò¥»¨CªÑ¬Õ¾l")
cat(y,z,";")
}
}
View(a)
View(a)
for(y in c(99:99)){#99~108
for(z in c(1:1)){#1~4
file_name_wr <- paste0(paste0(getwd(), "/data_SEASON/"), paste0(y,"0",z),".csv")
rcsv_tmp <- read.csv(file_name_wr)
# rcsv <- rbind(rcsv, rcsv_tmp[1:length(rcsv_tmp$V1),1:20])
# tmp_sea <- as.character(rcsv$V1[1]);tmp_sea
cat(y,z,";")
}
}
#------------------------------------eps estimate season-----------------------
rcsv <- NULL
for(y in c(99:99)){#99~108
for(z in c(1:1)){#1~4
file_name_wr <- paste0(paste0(getwd(), "/data_SEASON/"), paste0(y,"0",z),".csv")
rcsv_tmp <- read.csv(file_name_wr)
# rcsv <- rbind(rcsv, rcsv_tmp[1:length(rcsv_tmp$V1),1:20])
# tmp_sea <- as.character(rcsv$V1[1]);tmp_sea
cat(y,z,";")
}
}
rcsv_tmp%<>%t%>%t
a <- cbind(
rcsv_tmp[-1, grepl("¤½¥q¥N¸¹",rcsv_tmp[1,])] # stock no
,rcsv_tmp[-1, grepl("Àç·~¦¬¤J",rcsv_tmp[1,])] # operating revenue
,rcsv_tmp[-1, grepl("Àç·~¦¨¥»",rcsv_tmp[1,])] # operating costs
,rcsv_tmp[-1, grepl("Àç·~¤ò§Q",rcsv_tmp[1,])] # operating gross profit
,rcsv_tmp[-1, grepl("Àç·~¶O¥Î",rcsv_tmp[1,])] # operating expenses
,rcsv_tmp[-1, grepl("Àç·~²b§Q",rcsv_tmp[1,])] # operating net profit
,rcsv_tmp[-1, grepl("Àç·~¥~¦¬¤J¤Î§Q¯q",rcsv_tmp[1,])] # not operating revenue
,rcsv_tmp[-1, grepl("Àç·~¥~¶O¥Î¤Î·l¥¢",rcsv_tmp[1,])] # not operating expenses
,rcsv_tmp[-1, grepl("¥»´Á²b§Q",rcsv_tmp[1,])] # income after tax
,rcsv_tmp[-1, grepl("°ò¥»¨CªÑ¬Õ¾l",rcsv_tmp[1,])] # eps
)
#    colnames(a) <- c("¤½¥q¥N¸¹","Àç·~¦¬¤J","Àç·~¦¨¥»","Àç·~¤ò§Q","Àç·~¶O¥Î","Àç·~²b§Q",
#                     "Àç·~¥~¦¬¤J¤Î§Q¯q","Àç·~¥~¶O¥Î¤Î·l¥¢","¥»´Á²b§Q","°ò¥»¨CªÑ¬Õ¾l")
colnames(a) <- c("stock no","Àç·~¦¬¤J","Àç·~¦¨¥»","Àç·~¤ò§Q","Àç·~¶O¥Î","Àç·~²b§Q",
"Àç·~¥~¦¬¤J¤Î§Q¯q","Àç·~¥~¶O¥Î¤Î·l¥¢","¥»´Á²b§Q","°ò¥»¨CªÑ¬Õ¾l")
View(a)
a[-1, grepl("stock no",a[1,])]
a[1,]
grepl("stock no",a[1,])
grepl("stock no",colnames(a))
a[-1, grepl("stock no",colnames(a))]
rownames(a)
grepl("stock no",colnames(a))
a[grepl("stock no",colnames(a)), -1]
#    colnames(a) <- c("¤½¥q¥N¸¹","Àç·~¦¬¤J","Àç·~¦¨¥»","Àç·~¤ò§Q","Àç·~¶O¥Î","Àç·~²b§Q",
#                     "Àç·~¥~¦¬¤J¤Î§Q¯q","Àç·~¥~¶O¥Î¤Î·l¥¢","¥»´Á²b§Q","°ò¥»¨CªÑ¬Õ¾l")
colnames(a) <- c("stock","revenue","costs","gross profit","expenses","net profit",
"not operating revenue","not operating expenses","income after tax","eps")
View(a)
a[1,]
a[,1]
grepl("1101",a[,1])
b <- a[-1,grepl("1101",a[,1])]
a[-1,grepl("1101",a[,1])]
a[grepl("1101",a[,1]), -1]
b <- a[grepl("1101",a[,1]), -1]
b
a%<>%t
b <- a[-1,grepl("1101",a[,1])]
View(b)
a%<>%t
View(a)
a%<>%t
View(a)
a[,1]
a[1,]
grepl("1101",a[1,])
b <- a[-1,grepl("1101",a[1,])]
a[-1,grepl("1101",a[1,])]
b <- a[,grepl("1101",a[1,])]
a[,grepl("1101",a[1,])]
a[1,grepl("1101",a[1,])]
b <- a[,grepl("1101",a[1,])]
b <- a[,grepl("1101",a[1,])] %>% cbind
View(b)
b <- a[,grepl("1101",a[1,])] %>% cbind %>% as.numeric
a[,grepl("1101",a[1,])] %>% cbind %>% as.numeric
b <- a[,grepl("1101",a[1,])] %>% cbind
View(b)
